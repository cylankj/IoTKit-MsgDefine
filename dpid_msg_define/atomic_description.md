# 说明

## 消息id

服务器已经预定义了大部分通用功能id, 也支持定义特殊功能id。  

此id由平台生成， 如果操作中有未定义的id上报，会被服务器直接丢弃  

## 数据类型

数据类型支持如下:

* 整数(int)

  如：设备的版本号

* 浮点(float)

  如： 温度传感器上报的温度

* 布尔(bool)

  如： 门磁传感器汇报的开门/关门状态

* 枚举(enum)

  如： 设备支持2种音频格式，g711/opus

* 字符串

  用于支持自定义或复杂类型， 如: 采用json格式来配置wifi，需同时携带 [ssid, 密码，加密格式] 等数据
  
## 是否唯一  
  
* 具有唯一属性的值不会改变或短期内不会改变，如 厂商标示(一直不改变)，版本号（一般不变，升级才会变化）  
* 不具有唯一属性的，如 设备上报的温度，需要在服务器上进行记录，绘制表格
* 有唯一属性，服务器只会在数据变化时记录， 不唯一属性在每一次上报时生成记录

## APP 可见

* 此数据是否需要在APP端展示

## 显示/控制/显示（实时）

* 客户端处理方式：
  
  * 显示类不可修改
  * 控制类可修改。

* 服务端处理方式：
  * 显示类，服务器直接响应客户端。
  * 控制类，服务器先修改time为服务器时间戳（缓存依据），然后转发给设备端。
  * 显示（实时）类，需要从设备端获取数据，服务器中转。


## 是否有返回值

* 如果需要返回值：终端会收到响应消息ID [MIDRobotDataRsp = 20202]

## 是否展示图表

此数据是否需要在APP端以图表形式展示
如果需要图表：
* 客户端展示列表时，调用消息ID [MIDRobotGetData = 20200] , limit > 1获取数据。
* 客户端获取未读消息计数时，调用消息ID [MIDRobotCountData] MIDRobotCountDataQuery, 服务器需要对消息ID，CID及ACCOUNT做TCP消息计数，需要对ACCOUNT做APNS和GCM消息计数; 消息计数复用加菲狗KVS。
* 客户端查看未读消息时，调用消息ID [MIDRobotCountData] MIDRobotCountDataClear。
* 客户端删除消息时，调用消息ID [MIDRobotDelData = 20203]

## APP多终端是否需要同步

如果需要同步：
* 其他APP终端在线时，会收到更新时间戳后的消息[MIDRobotSetData = 20202]。注：不包含分享帐号。
* 每次上线后，APP端需调用[MIDRobotGetData = 20200]同步最新配置。
* 如果APP未做同步，多终端操作可能覆盖数据。


## 是否推送消息到APP端

* 如果需要推送：默认只推送到主帐号。